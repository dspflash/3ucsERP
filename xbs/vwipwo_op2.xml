<operator refresh="1" firstpage="1" prepage="1" nextpage="1">
			<EvalTbl rules="" table="wipmove_menu_rule">
			<rules><xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="rule/wipmove_menu_rule.xml"/></rules>
			<inputs queue="%{WipwoLst[queue_quantity]}" run="%{WipwoLst[running_quantity]}" firstlast="%{WipwoLst[firstlast]}" tomove="%{WipwoLst[tomove_quantity]}"/>
			<outputs title="text" disabled="disabled"/></EvalTbl>
<op text="wip_issue" needconfirm="0"><submit next="vWipWo.inv_issue_header.GBDEDITinv_issue_header" function="reset"/><DbDetails><Where>type_class='WIP' and transaction_action=1 and status is true</Where></DbDetails><submit namelist="dbdetails" next="vWipWo.inv_issue_header.transaction_type_id"/><assign name="vWipWo.inv_issue_header.reference_key_name" expr="wip_wo_header" function="setsel"/><DbDetails><DbTable>xbs.wip_wo_header</DbTable><Index>wip_wo_header_id</Index><Data>wo_number,quantity,wip_wo_header_id refid</Data><Where>wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}' and wo_status in (370,373)</Where></DbDetails><submit next="vWipWo.inv_issue_header.reference_key_value" namelist="DbDetails"/><assign name="vWipWo.inv_issue_header.bom_department" expr="%{WipwoLst[bom_department_id]}"/></op>
<op text="wip_issueLst" needconfirm="0"><assign name="vWipWo.vIssue.wip_wo_header_id" expr="%{WipwoLst[wip_wo_header_id]}"/><DbDetails><Where>reference_key_name='wip_wo_header' and reference_key_value='%{vWipWo.vIssue.wip_wo_header_id}' and created_by='%{user_id}'</Where></DbDetails><submit namelist="dbdetails" next="vWipWo.vIssue.vIssueLst"/><assign name="vWipWo.vIssue.bom_department_id" expr="%{WipwoLst[bom_department_id]}"/></op>
<op text="wip_resource" needconfirm="0"><submit next="$this.wip_resource_transaction.GBDEDITwip_resource_transaction" function="reset"/><DbDetails><DbTable>wip_wo_routing_detail d left join bom_resource r on d.resource_id=r.bom_resource_id</DbTable><Where>wip_wo_routing_line_id='%{WipwoLst[wip_wo_routing_line_id]}' and d.charge_type=343</Where></DbDetails><submit namelist="dbdetails" next="$this.wip_resource_transaction.wip_wo_routing_detail_id"/></op>
<op text="wip_resourceLst"><DbDetails><Where>wip_wo_routing_line_id='%{WipwoLst[wip_wo_routing_line_id]}'</Where></DbDetails><submit namelist="DbDetails" next="$this.wip_wo_routing_detail_v.wip_wo_routing_detail_vLst"/></op>
<op text="wip_completeLst" needconfirm="0"><assign name="vWipWo.vReceipt.wip_wo_header_id" expr="%{WipwoLst[wip_wo_header_id]}"/><DbDetails><Where>reference_key_name='wip_wo_header' and reference_key_value='%{vWipWo.vReceipt.wip_wo_header_id}' and (created_by='%{user_id}' OR '%{WipwoLst[routing_sequence]}'=(SELECT lastSEQ FROM wip_wo_routing_first_last_v WHERE wip_wo_header_id='%{vWipWo.vReceipt.wip_wo_header_id}'))</Where></DbDetails><submit namelist="dbdetails" next="vWipWo.vReceipt.vReceiptLst"/></op>
<op text="wip_supply_lack" mustselected="0" needconfirm="0"><submit namelist="dbdetails" next="vWipWo.wip_supply_lack.wip_bom_info_vLst"/></op>
<op text="bom" needconfirm="0"><DbDetails><Where>routing_sequence='%{WipwoLst[routing_sequence]}' and routing_seq_num='%{WipwoLst[routing_seq_num]}' and w.wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails><submit next="vWipWo.wip_wo_bom.wip_wo_bomLst" namelist="DbDetails"/></op>
<op text="reject">
	<DbDetails><Where>wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}' and '%{WipwoLst[wo_status]}'=370</Where></DbDetails><submit next="vWipWo.wip_move_transactionto.wip_wo_header_id" namelist="DbDetails"/><DbDetails><Where>routing_sequence='%{WipwoLst[routing_sequence]}' and routing_seq_num='%{WipwoLst[routing_seq_num]}' and wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails><submit next="vWipWo.wip_move_transactionto.from_routing_sequence" namelist="DbDetails"/>
	<DbDetails fcsm="1"><queryFormat>SELECT concat(from_routing_sequence,'-',from_routing_seq_num) txt,from_routing_sequence routing_sequence,from_routing_seq_num routing_seq_num FROM wip_move_transaction WHERE to_routing_sequence='%{WipwoLst[routing_sequence]}' AND to_routing_seq_num='%{WipwoLst[routing_seq_num]}' AND from_operation_step=380 AND to_operation_step=382 AND wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</queryFormat></DbDetails><submit next="vWipWo.wip_move_transactionto.to_routing_sequence" namelist="DbDetails"/><assign name="vWipWo.wip_move_transactionto.move_qty" expr="%{WipwoLst[queue_quantity]}"/><assign name="vWipWo.wip_move_transactionto.move_quantity" expr="%{WipwoLst[queue_quantity]}"/>
	<assign name="vWipWo.wip_move_transactionto.from_operation_step" expr="382"/><assign name="vWipWo.wip_move_transactionto.to_operation_step" expr="379"/></op>
<op text="run"><assign name="vWipWo.wip_move_transactionto.issued" expr=""/>
	<DbDetails><Where> AND routing_sequence='%{WipwoLst[routing_sequence]}' and routing_seq_num='%{WipwoLst[routing_seq_num]}' and wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails><submit next="vWipWo.wip_move_transactionto.issued" namelist="DbDetails"/><DbDetails><Where>wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}' and '%{WipwoLst[wo_status]}'=370</Where></DbDetails><submit next="vWipWo.wip_move_transactionto.wip_wo_header_id" namelist="DbDetails"/>
	<DbDetails><Where>routing_sequence='%{WipwoLst[routing_sequence]}' and routing_seq_num='%{WipwoLst[routing_seq_num]}' and wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where><queryFormat>select %{data} from %{dbtable} where %{where}</queryFormat></DbDetails><submit next="vWipWo.wip_move_transactionto.from_routing_sequence" namelist="DbDetails"/><submit next="vWipWo.wip_move_transactionto.to_routing_sequence" namelist="DbDetails"/><assign name="vWipWo.wip_move_transactionto.from_operation_step" expr="382"/><assign name="vWipWo.wip_move_transactionto.to_operation_step" expr="378"/><assign name="vWipWo.wip_move_transactionto.move_qty" expr="%{WipwoLst[queue_quantity]}"/><assign name="vWipWo.wip_move_transactionto.move_quantity" expr="%{WipwoLst[queue_quantity]}"/></op>
<op text="scrap"><DbDetails><Where>wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}' and '%{WipwoLst[wo_status]}'=370</Where></DbDetails>
	<submit next="vWipWo.wip_move_transactionto.wip_wo_header_id" namelist="DbDetails"/>
	<DbDetails><Where>routing_sequence='%{WipwoLst[routing_sequence]}' and routing_seq_num='%{WipwoLst[routing_seq_num]}' and wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where><queryFormat>select %{data} from %{dbtable} where %{where}</queryFormat></DbDetails><submit next="vWipWo.wip_move_transactionto.from_routing_sequence" namelist="DbDetails"/><submit next="vWipWo.wip_move_transactionto.to_routing_sequence" namelist="DbDetails"/><assign name="vWipWo.wip_move_transactionto.from_operation_step" expr="378"/><assign name="vWipWo.wip_move_transactionto.to_operation_step" expr="381"/><assign name="vWipWo.wip_move_transactionto.move_qty" expr="%{WipwoLst[running_quantity]}"/><assign name="vWipWo.wip_move_transactionto.move_quantity" expr="%{WipwoLst[running_quantity]}"/></op>
<!--op text="tomove"><DbDetails><Where>wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails>
	<submit next="vWipWo.wip_move_transactionto.wip_wo_header_id" namelist="DbDetails"/>
	<DbDetails><Where>routing_sequence='%{WipwoLst[routing_sequence]}' and wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails><submit next="vWipWo.wip_move_transactionto.from_routing_sequence" namelist="DbDetails"/>
	<submit next="vWipWo.wip_move_transactionto.to_routing_sequence" namelist="DbDetails"/>
	<assign name="vWipWo.wip_move_transactionto.from_operation_step[option_line_id]" expr="378" function="setsel"/><assign name="vWipWo.wip_move_transactionto.to_operation_step[option_line_id]" expr="380" function="setsel"/></op-->
<op text="move"><assign name="vWipWo.wip_move_transactionto.issued" expr=""/>
	<DbDetails><Where> AND routing_sequence='%{WipwoLst[routing_sequence]}' and routing_seq_num='%{WipwoLst[routing_seq_num]}' and wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails><submit next="vWipWo.wip_move_transactionto.issued" namelist="DbDetails"/>
	<DbDetails><Where>wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}' and '%{WipwoLst[wo_status]}'=370</Where></DbDetails><submit next="vWipWo.wip_move_transactionto.wip_wo_header_id" namelist="DbDetails"/><DbDetails><Where>routing_sequence='%{WipwoLst[routing_sequence]}' and routing_seq_num='%{WipwoLst[routing_seq_num]}' and wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails><submit next="vWipWo.wip_move_transactionto.from_routing_sequence" namelist="DbDetails"/>
	<DbDetails><queryFormat>SELECT MIN(routing_sequence) routing_sequence,routing_seq_num FROM wip_wo_routing_line WHERE (routing_sequence BETWEEN '%{WipwoLst[routing_sequence]}'+1 AND '%{WipwoLst[lastSeq]}') AND (routing_seq_num =0 OR routing_seq_num='%{WipwoLst[routing_seq_num]}') AND wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}' GROUP BY routing_seq_num</queryFormat></DbDetails><submit next="vWipWo.wip_move_transactionto.to_routing_sequence" namelist="DbDetails"/><assign name="vWipWo.wip_move_transactionto.from_operation_step" expr="380"/><assign name="vWipWo.wip_move_transactionto.to_operation_step" expr="382"/><assign name="vWipWo.wip_move_transactionto.move_qty" expr="%{WipwoLst[running_quantity]}"/><assign name="vWipWo.wip_move_transactionto.move_quantity" expr="%{WipwoLst[running_quantity]}"/></op>
<!--op text="wip_complete"><submit next="vWipWo.inv_receipt_header.GBDEDITinv_receipt_header" function="reset"/><DbDetails><Where>type_class='WIP' and transaction_action=27 and status is true</Where></DbDetails><submit namelist="dbdetails" next="vWipWo.inv_receipt_header.transaction_type_id"/><assign name="vWipWo.inv_receipt_header.reference_key_name" expr="wip_wo_header" function="setsel"/><DbDetails><DbTable>xbs.wip_wo_header</DbTable><Index>wip_wo_header_id</Index><Data>wo_number,wip_wo_header_id refid</Data><Where>wip_wo_header_id='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails><submit next="vWipWo.inv_receipt_header.reference_key_value" namelist="DbDetails"/></op>
<op text="wip_completeLst"><DbDetails><Where>reference_key_name='wip_wo_header' and reference_key_value='%{WipwoLst[wip_wo_header_id]}'</Where></DbDetails><submit namelist="dbdetails" next="vWipWo.vReceipt.vReceiptLst"/></op-->
</operator>