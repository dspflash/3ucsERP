<?xml version="1.0" encoding="UTF-8"?><biztoolcfg qryfmtOpCreate="SELECT IFNULL(MAX(line_number),0)+1 INTO @linenum FROM hr_expense_line WHERE hr_expense_header_id='%{hr_expense_header_id}'; insert into %{table} %{data};update hr_expense_header set header_amount=header_amount+%{receipt_amount} where hr_expense_header_id=%{hr_expense_header_id};" qryfmtOpUpdate="update %{table} set %{data} where %{where};UPDATE hr_expense_header SET header_amount=(SELECT SUM(receipt_amount) FROM hr_expense_line WHERE hr_expense_header_id=%{hr_expense_header_id}) WHERE hr_expense_header_id=%{hr_expense_header_id};" loadedClick="0" tableNm="hr_expense_line" referLst="0" onLoadInit="0" tableTxt="hr_expense_line" LstTP="Lst" lines2Link="" jointbls="1" header2Link="hr_expense_header_id" exdata4select=""><addons><![CDATA[<Button Name="cal_expense" Size="50,20" visible="0"><OnClick><if cond="1"><assign name="receipt_amount" expr="js((%{daily_rate}*%{no_of_days})+(%{per_diem_rate}*%{per_diem_days})+(%{mileage_distace}*%{mileage_rate}))"/></if></OnClick></Button>]]></addons><Ctrls><Ctrl name="claim_date"/><Ctrl Required="1" nomodify="1" name="receipt_amount"/><Ctrl Required="1" ctrldbname="xbs." name="receipt_currency" ctrldbtable="currency" xTp="ComboBox" ctrldbdata="title,(SELECT currency_code FROM xbs.org_ledger_v WHERE org_id='%{orgid}') ledger_currency,currency_id" ctrldbdatarel="currency_id" ctrltype="ComboBox"><extelmt><![CDATA[<OnSelEndOk><if cond="%{receipt_currency[currency_id]}"><if cond="%{receipt_currency[ledger_currency]}"><submit next="currency_conversion_type"/></if></if></OnSelEndOk>]]></extelmt><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl name="exchange_rate"/><Ctrl Required="1" ctrldbname="xbs." name="expense_type" ctrldbwhere="hr_expense_tpl_header_id=(SELECT expense_template_id FROM hr_expense_header WHERE hr_expense_header_id='%{hr_expense_header_id}')" ctrldbtable="hr_expense_tpl_line" xTp="ComboBox" ctrldbdata="expense_item,hr_expense_tpl_line_id" ctrldbdatarel="hr_expense_tpl_line_id" ctrltype="ComboBox"/><Ctrl noquery="1" nomodify="1" ctrldbname="xbs." ctrlhide="1" name="status" noInsert="1" ctrldbwhere="option_header_id=132" insertparam="321" ctrldbtable="option_line" noInAndUp="1" noUpdate="1" ctrldbdata="option_line_value,option_line_id" ctrldbdatarel="option_line_id"/><Ctrl name="purpose"/><Ctrl name="start_date"/><Ctrl ctrltext="0" name="daily_rate"><extelmt><![CDATA[<OnEnChange><submit next="cal_expense" function="click"/></OnEnChange>]]></extelmt></Ctrl><Ctrl ctrltext="0" name="no_of_days"><extelmt><![CDATA[<OnEnChange><submit next="cal_expense" function="click"/></OnEnChange>]]></extelmt></Ctrl><Ctrl ctrldbname="xbs." name="expense_location" ctrldbtable="hr_location" xTp="ComboBox" ctrldbdata="combination,hr_location_id" ctrldbdatarel="hr_location_id" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="line_number" insertparam="@linenum" noUpdate="1"/><Ctrl ctrltext="0" ctrldbname="xbs." name="per_diem_rate"><extelmt><![CDATA[<OnEnChange><submit next="cal_expense" function="click"/></OnEnChange>]]></extelmt></Ctrl><Ctrl ctrltext="0" name="per_diem_days"><extelmt><![CDATA[<OnEnChange><submit next="cal_expense" function="click"/></OnEnChange>]]></extelmt></Ctrl><Ctrl ctrldbname="xbs." name="mileage_uom_id" ctrldbwhere="class=111" ctrldbtable="uom" xTp="ComboBox" ctrldbdata="uom_name,uom_id" ctrldbdatarel="uom_id" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl ctrltext="0" name="mileage_distace"><extelmt><![CDATA[<OnEnChange><submit next="cal_expense" function="click"/></OnEnChange>]]></extelmt></Ctrl><Ctrl ctrltext="0" name="mileage_rate"><extelmt><![CDATA[<OnEnChange><submit next="cal_expense" function="click"/></OnEnChange>]]></extelmt></Ctrl><Ctrl name="vendor_name"/><Ctrl name="vendor_details"/><Ctrl noused="1" noquery="1" nomodify="1" ctrlhide="1" name="cc_transaction_id" noInsert="1" noUpdate="1"/><Ctrl noused="1" noquery="1" nomodify="1" ctrlhide="1" name="cc_transaction_date" noInsert="1" noUpdate="1"/><Ctrl noused="1" noquery="1" nomodify="1" ctrlhide="1" name="cc_age" noInsert="1" noUpdate="1"/><Ctrl noused="1" noquery="1" nomodify="1" ctrlhide="1" name="cc_transaction_amount" noInsert="1" noUpdate="1"/><Ctrl name="original_receipt_missing_cb"/><Ctrl noquery="1" ctrlhide="1" name="created_by" insertparam="'%{user_id}'" noUpdate="1"/><Ctrl noquery="1" ctrlhide="1" name="creation_date" insertparam="now()" noUpdate="1"/><Ctrl noquery="1" ctrlhide="1" name="last_update_by" insertparam="'%{user_id}'" updateparam="'%{user_id}'"/><Ctrl noquery="1" ctrlhide="1" name="last_update_date" insertparam="now()" updateparam="now()"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="hr_expense_line_id" noInsert="1" noInAndUp="1" noUpdate="1"/><Ctrl Required="1" noquery="1" nomodify="1" ctrldbname="xbs." ctrlhide="1" name="hr_expense_header_id" noUpdate="1"><extelmt><![CDATA[<OnEnChange><submit next="expense_type"/></OnEnChange>]]></extelmt></Ctrl></Ctrls></biztoolcfg>